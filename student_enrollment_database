
CREATE TABLE STUDENT
(
 REGNO VARCHAR2(10),
 NAME VARCHAR2(14),
 MAJOR VARCHAR2(10),
 BDATE DATE,
 PRIMARY KEY(REGNO)
);

CREATE TABLE COURSE
(
 COURSE NUMBER(4),
 CNAME VARCHAR2(14),
 DEPT VARCHAR2(10),
 PRIMARY KEY(COURSE)
);

CREATE TABLE ENROLL
(
 REGNO VARCHAR2(10),
 COURSE NUMBER(4),
 SEM NUMBER(4),
 MARKS NUMBER(3),
 PRIMARY KEY(REGNO,COURSE,SEM),
 FOREIGN KEY(REGNO) REFERENCES STUDENT(REGNO),
 FOREIGN KEY(COURSE) REFERENCES COURSE(COURSE)
);
CREATE TABLE TEXT
(
 ISBN NUMBER(5),
 BOOK_TITLE VARCHAR2(13) NOT NULL,
 PUBLISHER VARCHAR2(12),
 AUTHOR VARCHAR2(12),
 PRIMARY KEY(ISBN)
);
CREATE TABLE BOOK_ADOPTION
(
 COURSE NUMBER(5),
 SEM NUMBER(3),
 ISBN NUMBER(4),
 PRIMARY KEY(COURSE,SEM),
 FOREIGN KEY(COURSE) REFERENCES COURSE(COURSE),
 FOREIGN KEY(ISBN) REFERENCES TEXT(ISBN)
);

INSERT INTO STUDENT VALUES('&REGNO','&NAME','&MAJOR','&BDATE');
INSERT INTO COURSE VALUES(&COURSE,'&CNAME','&DEPT');
INSERT INTO ENROLL VALUES('&REGNO',&COURSE,&SEM,&MARKS);
INSERT INTO TEXT VALUES(&ISBN,'&BOOK_TITLE','&PUBLISHER','&AUTHOR');
INSERT INTO BOOK_ADOPTION VALUES(&COURSE,&SEM,&ISBN);

SELECT * FROM STUDENT;
SELECT * FROM COURSE;
SELECT * FROM ENROLL;
SELECT * FROM TEXT;
SELECT * FROM BOOK_ADOPTION;

INSERT INTO TEXT VALUES(1000,'ORACLE','MINIYA','BARY');
INSERT INTO COURSE VALUES(10,'ORACLE','ISE');
INSERT INTO BOOK_ADOPTION VALUES(10,1,1000);

SELECT C.COURSE,CNAME,B.ISBN,BOOK_TITLE FROM COURSE C,BOOK_ADOPTION B,TEXT T WHERE C.COURSE=B.COURSE AND B.ISBN=T.ISBN  AND    
C.COURSE IN   (SELECT C1.COURSE FROM COURSE C1,BOOK_ADOPTION B1 WHERE C1.COURSE=B1.COURSE AND DEPT='CSE' GROUP BY C1.COURSE
HAVING COUNT(*)>2) ORDER BY CNAME;

SELECT DISTINCT C.DEPT FROM COURSE C WHERE C.DEPT IN(SELECT C1.DEPT FROM COURSE C1,BOOK_ADOPTION B,TEXT T 
WHERE C1.COURSE=B.COURSE AND B.ISBN=T.ISBN AND T.PUBLISHER='PHI') AND C.DEPT NOT IN(SELECT C2.DEPT FROM COURSE C2,
BOOK_ADOPTION B1,TEXT T1 WHERE C2.COURSE=B1.COURSE AND B1.ISBN=T1.ISBN AND T1.PUBLISHER!='PHI')





